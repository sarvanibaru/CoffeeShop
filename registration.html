<!doctype html>
<html>
    <head>
        <title>Home- Dallas Coffee House</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <!-- CSS for this page-->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <!-- css files -->
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" type="text/css" href="css/footer.css">

        <!-- font-styles -->
        <script src="https://kit.fontawesome.com/a076d05399.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Dancing+Script" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Spicy+Rice&display=swap" rel="stylesheet">

        <!-- templates -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
        <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <style>


            .well form-horizontal {
                position: relative;
                font-size: 16px;
                height: auto;
                padding: 10px;
                @include box-sizing(border-box);

                &:focus {
                    z-index: 2;
                }
            }

            input[type="text"] {
                margin-bottom: -1px;
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }

            input[type="password"] {
                margin-bottom: 20px;
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }
            }


        </style>
    </head>

    <body style="background-color: lightyellow">

        <div class="mySlides fade">
            <img src="assets/img_1.jpg" style="width:100%">
        </div>

        <div class="mySlides fade">
            <img src="assets/img_2.jpg" style="width:100%">
        </div>

        <div class="mySlides fade">
            <img src="assets/img_3.jpg" style="width:100%">
        </div>


        <div class="navigation"> 
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <a class="navbar-brand" href="index.html"><img src="assets/logo.png" style="width: 150px;height: 50px; top:-15px; position: relative;"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent"> 
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="menu_without_login.php" style="font-size: 20px;font-family: 'Spicy Rice', cursive;padding-left: 40px;">Our Menu</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html" style="font-size: 20px;font-family: 'Spicy Rice', cursive;padding-left: 40px;">Home</a>
                        </li>
                    </ul>
                    <li class="form-inline my-2 my-lg-0">
                        <a class="nav-link" href="login.html" tabindex="-1" style="font-size: 20px;font-family: 'Spicy Rice', cursive;padding-left: 40px;">Login</a>
                    </li>
                </div>
            </nav>
        </div>
        <br><br>
        <div>
            <div id = "register" style="margin: auto,
                                        width: 100%,
                                        padding: 10px,
                                        height:100%">
                <div class="container">
                    <form method="post" action="registration.php" class="well form-horizontal">
                        <fieldset>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="fname">First Name</label>  
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                        <input class="form-control"  type="text" id="fname" name="fname">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="lname">Last Name</label> 
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                        <input class="form-control"  type="text" id="lname" name="lname">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="email">E-Mail</label>  
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                        <input name="email"  class="form-control"  type="email" id="email" autocomplete="email">
                                    </div>
                                </div>
                            </div>

                            <div id="availability"></div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="password" >Password</label> 
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                        <input name="password" id="password" autocomplete="current-password"  class="form-control"  type="password">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="confirmpassword">Confirm Password</label> 
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                        <input type="password" name="confirmpassword" id="confirmpassword"  class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="dob">Date of Birth:</label>  
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
                                        <input name="dob" id="dob"  class="form-control" type="date">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="street">Street Address:</label>  
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
                                        <input name="street" id="street"  class="form-control" type="text">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group"> 
                                <label class="col-md-4 control-label" for="city">City:</label>
                                <div class="col-md-4 selectContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
                                        <select id="city" name="city" class="form-control selectpicker">
                                            <option value="Dallas">Dallas</option>
                                            <option value="Plano">Plano</option>
                                            <option value="Richardson">Richardson</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="zipcode">Zip Code:</label>  
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
                                        <input name="zipcode" id="zipcode" class="form-control" type="text">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-4"><br>
                                    <input type="submit" name="submit" id="submit" value="Register"/>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </div>
            </div>




            <div id="reg_result"></div>

            <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
            <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

            <script type="text/javascript">
                $(document).ready(function() {


                    var flag1=false;
                    var flag2 = false;
                    var flag3= false;
                    var flag4= false;
                    var flag5 = false;
                    var flag6 = false;
                    var flag7 = false;
                    var flag8 = false; 
                    $("<span id = 'fusrname'></span>").insertAfter("#fname");
                    $("<span id = 'lusrname'></span>").insertAfter("#lname");
                    $("<span id = 'pwd'></span>").insertAfter("#password");
                    $("<span id = 'addr'></span>").insertAfter("#street");
                    $("<span id = 'zip_code'></span>").insertAfter("#zipcode");
                    $("<span id = 'mail_span'></span>").insertAfter("#email");
                    $("<span id = 'pwdconfirm'></span>").insertAfter("#confirmpassword"); 

                    $("#street").focus(function () {

                        $("#addr").addClass("info").text("Please enter your street address");
                        flag1 = false;
                    });

                    $("#street").blur(function () {
                        if ($(this).val().length>0) {

                            $("#addr").html("<span class='green' >&#x2713;</span>");
                            flag1 = true;
                        }

                        else {
                            $("#addr").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("please enter a valid street address");
                            flag1 = false;
                        }

                    });

                    
                    $("#zipcode").focus(function () {

                        $("#zip_code").addClass("info").text("please enter a valid 5 digit zip code");
                        flag3 = false;
                    });

                    $("#zipcode").blur(function () {
                        if (/^\d{5}$/i.test($(this).val())) {

                            $("#zip_code").html("<span class='green' >&#x2713;</span>");
                            flag3 = true;
                        }

                        else {
                            $("#zip_code").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("please enter a valid 5 digit zip code");
                            flag3 = false;
                        }

                    });


                    $("#fname").focus(function () {

                        $("#fusrname").addClass("info").text("Please enter your first name");
                        flag4 = false;
                    });

                    $("#fname").blur(function () {
                        if ($(this).val().length >= 1 && /^[A-Za-z]+$/i.test($(this).val())) {

                            $("#fusrname").html("<span class='green' >&#x2713;</span>");
                            flag4 = true;
                        }

                        else {
                            $("#fusrname").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("please enter a valid first name");
                            flag4 = false;
                        }

                    });

                    $("#lname").focus(function () {


                        $("#lusrname").addClass("info").text("Please enter your last name");
                        flag5 = false;
                    });

                    $("#lname").blur(function () {
                        if ($(this).val().length >= 1 && /^[A-Za-z]+$/i.test($(this).val())) {

                            $("#lusrname").html("<span class='green' >&#x2713;</span>");
                            flag5 = true;
                        }
                        else {
                            $("#lusrname").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("please enter a valid last name");
                            flag5 = false;
                        }

                    });


                    $("#password").focus(function () {

                        $("#pwd").addClass("info").text("Password should have at least one number, one lowercase and one uppercase letter and six characters");
                        flag6 = false;
                    });


                    $("#password").blur(function () {  
                        if (/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/i.test($(this).val())) {    

                            flag6 = true;
                            $("#pwd").html("<span class='green' >&#x2713;</span>");

                        }

                        else {
                            $("#pwd").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("Password should have at least one number, one lowercase and one uppercase letter and six characters");
                            flag6 = false;
                        }
                        if($("#confirmpassword").val() != $(this).val())
                        {
                            $("#pwdconfirm").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("Passwords don't match");
                            flag8 = false;
                        }

                    });

                    $("#confirmpassword").focus(function () {

                        $("#pwdconfirm").addClass("info").text("Please confirm password");
                        flag8 = false;
                    });


                    $("#confirmpassword").blur(function () {
                        if ($(this).val() == $("#password").val() ) {

                            flag8 = true;
                            $("#pwdconfirm").html("<span class='green' >&#x2713;</span>");

                        }
                        else {
                            $("#pwdconfirm").removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("Passwords don't match");
                            flag8 = false;
                        }

                    });




                    $("#email").focus(function () {
                        $("#mail_span").addClass("info").text("Please enter your email including '@'.");
                    });




                    $("#email").blur(function()
                                     {	if(($(this).val != '') && ($(this).val().indexOf("@") > 0))
                                     {
                                         var email_val = $(this).val();
                                         $.ajax({

                                             url:"check_availability.php",
                                             method:"POST",
                                             data: {email:email_val},
                                             dataType:"text",
                                             success:function(html){


                                                 $('#availability').html(html);
                                                 $('#availability').show();

                                                 var x1 = html; 

                                                 if(x1== "<div> Email address can be registered</div>"){
                                                     flag7 = true;

                                                     $("#mail_span").html("<span class='green' >&#x2713;</span>");


                                                 }
                                                 else
                                                 {
                                                     $('#mail_span').html('');

                                                     flag7 = false;
                                                 }

                                             }
                                         });
                                     }
                                      else
                                      {
                                          $('#mail_span').removeClass("info").removeClass("ok").addClass("error").text("Error").addClass("error").text("Plese enter a valid email inlcuding @");

                                      }
                                     });


                    $("#submit").click(function()
                                       { 
                        var dob = $("#dob").val();
                        var flag9 = false;
                        if(dob)
                        {
                            var flag9 =true;
                        }                

                        if(flag1&&flag2&&flag3&&flag4&&flag5&&flag6&&flag7&&flag8&&flag9)
                        {   
                            var email = $("#email").val();
                            var phone = $("#phone").val();
                            var fname = $("#fname").val();
                            var lname = $("#lname").val();
                            var password = $("#password").val();
                            
                            var street = $("#street").val();
                            var city = $("#city").val();

                            var zipcode = $('#zipcode').val();

                            $.ajax({

                                type: "POST",
                                url: "../registration.php",
                                dataType: "text",
                                cache: false,
                                data: {email:email, fname:fname, lname:lname, password:password,street:street,city:city,zipcode:zipcode,dob:dob},
                                contentType: false,
                                processData: false,
                                success : function(data){
                                    if (data.code == "200"){
                                        console.log(data);
                                        $("#reg_result").html(data);
                                        $("#reg_result").show();

                                    } else {

                            
                                        $("#reg_result").html(data);
                                        $("#reg_result").show();
                                    }
                                }
                            });




                        }
                        else{
                             }




                    });





                });
            </script>
            <br><br>
        </div>
        <footer class="site-footer">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12 col-md-6">
                        <h6>About</h6>
                        <p class="text-justify">Dallas Coffee is a popular coffee shop in Dallas especially famous for its various species of coffee beans,snacks,juices. It is Dallas's favourite hangout for coffee and conversations.Our coffees are sourced from thousands of small coffee planters, who made us who we are today and we're glad to be a part of their lives.We started our cafe in 2018 in Richardson,Texas.Its been an exciting journey till now and we hope it continues in the coming future as well.</p>
                    </div>

                    <div class="col-xs-6 col-md-3">
                        <h6>Contact Us</h6>
                        <p class="text-justify">7575 Frankford Road<br>Dallas TX 75252<br><i>Call us on (999) 999-9999</i></p>
                    </div>

                    <div class="col-xs-6 col-md-3">

                        <h6>Our Locations</h6>
                        <ul class="footer-links">
                            <li><a href="#">Dallas</a></li>
                            <li><a href="#">Richardson</a></li>
                            <li><a href="#">Plano</a></li>

                        </ul>
                    </div>
                </div>
                <hr>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-sm-6 col-xs-12">
                        <p>Copyright &copy; All Rights Reserved</p>
                    </div>

                    <div class="col-md-4 col-sm-6 col-xs-12">
                    
                    </div>
                </div>
            </div>
        </footer>


        <script type="text/javascript">
            var slideIndex = 0;
            showSlides();

            function showSlides() {
                var i;
                var slides = document.getElementsByClassName("mySlides");
                for (i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";  
                }
                slideIndex++;
                if (slideIndex > slides.length) {slideIndex = 1}
                slides[slideIndex-1].style.display = "block";  
                setTimeout(showSlides, 4000); 
            }   
        </script>


    </body>
</html>